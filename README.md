# Anomaly Detection in Evolving Knowledge Graphs

This repository contains the code for the experiments presented in the paper "Anomaly Detection in Evolving Knowledge Graphs". The experiments are designed to validate our proposed approach for detecting anomalies in knowledge graphs in both batch and real-time modes.

## Repository Structure

The repository is organized as follows:

- `01_papers_graph.py`: Python script for the batch anomaly detection experiment on a scientific paper graph.
- `02_playlist_graph.py`: Python script for the batch anomaly detection experiment on a music playlist graph.
- `03_social_network.py`: Python script for the real-time anomaly detection experiment on a synthetic social network graph.
- `functions/`: A directory containing helper functions for graph generation, text embedding, and anomaly detection.
- `images/`: A directory containing the images used in the paper.

## Requirements

The experiments require Python 3 and the following libraries:

- `pandas`
- `numpy`
- `matplotlib`
- `scipy`
- `tqdm`
- `graphdatascience`
- `neo4j`
- `lance`
- `pyarrow`
- `sklearn`
- `aeon`
- `Faker`

You can install the required libraries using pip:

```bash
pip install pandas numpy matplotlib scipy tqdm graphdatascience neo4j lance pyarrow scikit-learn aeon Faker
```

## Data

The batch experiments (`01_papers_graph.py` and `02_playlist_graph.py`) require a running Neo4j database instance populated with the respective datasets (scientific papers and Spotify playlists). The connection details (URI, username, password) are specified at the beginning of each script.

The real-time experiment (`03_social_network.py`) generates its own synthetic data using the `Faker` library and does not require any external data source.

## Running the Experiments

### Batch Anomaly Detection

To run the batch anomaly detection experiments, you need to have a Neo4j database set up with the corresponding data.

1.  **Paper Graph Experiment**:
    -   Ensure your Neo4j instance with the paper graph data is running.
    -   Update the Neo4j connection URI and authentication details in `01_papers_graph.py`:
        ```python
        URI = "bolt://localhost:17180"
        AUTH = ("", "")
        ```
    -   Run the script:
        ```bash
        python 01_papers_graph.py
        ```

2.  **Playlist Graph Experiment**:
    -   Ensure your Neo4j instance with the playlist graph data is running.
    -   Update the Neo4j connection URI and authentication details in `02_playlist_graph.py`:
        ```python
        URI = "bolt://localhost:57190"
        AUTH = ("", "")
        ```
    -   Run the script:
        ```bash
        python 02_playlist_graph.py
        ```

### Real-time Anomaly Detection

To run the real-time anomaly detection experiment:

1.  Run the script:
    ```bash
    python 03_social_network.py
    ```

The script will generate a synthetic social network, simulate the occurrence of knowledge events, and plot the cumulative number of warnings generated by the anomaly detection system.

## Citation

If you use this code in your research, please cite our paper:

```
[Citation to be added]
```
